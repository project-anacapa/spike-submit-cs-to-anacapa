<project default="compile"
	 xmlns:if="ant:if"
	 xmlns:unless="ant:unless"
	 >

  <!-- for explanation of
       xmlns:if="ant:if"
       xmlns:unless="ant:unless"
       see: https://ant.apache.org/manual/ifunless.html
  -->
  
 <property name="main.class" value="edu.ucsb.cs56.pconrad.parsing.Main" />
  
  <path id="project.class.path">
    <pathelement location="jars/hamcrest-core-1.3.jar"/>
    <pathelement location="jars/junit-4.12.jar"/>
    <pathelement location="build/classes"/>
  </path>

  <target name="clean" description="clean up">
    <delete dir="build"/>
  </target>

  <target name="compile" description="compile the code">
    <mkdir dir="build/classes"/>
    <javac includeantruntime="false" srcdir="src" destdir="build/classes" debug="on" nowarn="true">
      <compilerarg value="-Xlint:unchecked"/>
      <classpath refid="project.class.path" />   
    </javac>
  </target>

  <target name="test_tokenizer_given" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.tokenizer.TestArithmeticTokenizerGiven">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_tokenizer_new_given" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.tokenizer.TestArithmeticTokenizerNewGiven">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_tokenizer_secret_1" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.tokenizer.TestArithmeticTokenizerSecret1">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_tokenizer_secret_2" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.tokenizer.TestArithmeticTokenizerSecret2">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_tokenizer_secret_3" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.tokenizer.TestArithmeticTokenizerSecret3">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_tokenizer_secret_4" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.tokenizer.TestArithmeticTokenizerSecret4">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_tokenizer_secret_5" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.tokenizer.TestArithmeticTokenizerSecret5">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_tokenizer_secret_6" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.tokenizer.TestArithmeticTokenizerSecret6">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_tokenizer_secret_7" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.tokenizer.TestArithmeticTokenizerSecret7">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_tokenizer_secret_8" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.tokenizer.TestArithmeticTokenizerSecret8">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_tokenizer_secret_9" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.tokenizer.TestArithmeticTokenizerSecret9">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_tokenizer_secret_10" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.tokenizer.TestArithmeticTokenizerSecret10">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_parser_given" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.parser.TestParserGiven">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_parser_new_given" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.parser.TestParserNewGiven">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_parser_secret_1" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.parser.TestParserSecret1">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_parser_secret_2" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.parser.TestParserSecret2">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_parser_secret_3" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.parser.TestParserSecret3">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_parser_secret_4" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.parser.TestParserSecret4">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_parser_secret_5" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.parser.TestParserSecret5">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_parser_secret_6" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.parser.TestParserSecret6">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_parser_secret_7" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.parser.TestParserSecret7">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_parser_secret_8" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.parser.TestParserSecret8">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_evaluator_given" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.evaluator.TestEvaluatorGiven">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_evaluator_new_given" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.evaluator.TestEvaluatorNewGiven">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_evaluator_secret_1" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.evaluator.TestEvaluatorSecret1">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>

  <target name="test_evaluator_secret_2" depends="compile" description="tests">
    <junit haltonerror="no" haltonfailure="no">
      <classpath refid="project.class.path" />   
      <test name="edu.ucsb.cs56.pconrad.parsing.evaluator.TestEvaluatorSecret2">
        <formatter type="plain" usefile="false" />
      </test>
    </junit>
  </target>


  <target name="diff-test-01" depends="compile" description="run tests using CLI, diffing actual and expected output ">

    <delete dir="temp.d" quiet="true" />
    <mkdir dir="temp.d" />
    <java classname="${main.class}" fork="true">
      <classpath refid="project.class.path" />         
      <redirector
	  input="testdata/test01.input.txt"
	  output="temp.d/test01.output.txt" />
    </java>
    <condition property="test01passed" value="true">
      <filesmatch file1="testdata/test01.expected.txt"
		  file2="temp.d/test01.output.txt" />
    </condition>
    <echo if:set="test01passed">test01 from testdata passed</echo>
    <echo unless:set="test01passed">test01 from testdata failed</echo>
    
  </target>

  <target name="diff-test-02" depends="compile" description="run tests using CLI, diffing actual and expected output ">

    <delete dir="temp.d" quiet="true" />
    <mkdir dir="temp.d" />
    <java classname="${main.class}" fork="true">
      <classpath refid="project.class.path" />         
      <redirector
	  input="testdata/test02.input.txt"
	  output="temp.d/test02.output.txt" />
    </java>
    <condition property="test02passed" value="true">
      <filesmatch file1="testdata/test02.expected.txt"
		  file2="temp.d/test02.output.txt" />
    </condition>
    <echo if:set="test02passed">test02 from testdata passed</echo>
    <echo unless:set="test02passed">test02 from testdata failed</echo>
    
  </target>

    <target name="diff-test-03" depends="compile" description="run tests using CLI, diffing actual and expected output ">

    <delete dir="temp.d" quiet="true" />
    <mkdir dir="temp.d" />
    <java classname="${main.class}" fork="true">
      <classpath refid="project.class.path" />         
      <redirector
	  input="testdata/test03.input.txt"
	  output="temp.d/test03.output.txt" />
    </java>
    <condition property="test03passed" value="true">
      <filesmatch file1="testdata/test03.expected.txt"
		  file2="temp.d/test03.output.txt" />
    </condition>
    <echo if:set="test03passed">test03 from testdata passed</echo>
    <echo unless:set="test03passed">test03 from testdata failed</echo>
    
  </target>

    <target name="diff-test-04" depends="compile" description="run tests using CLI, diffing actual and expected output ">

    <delete dir="temp.d" quiet="true" />
    <mkdir dir="temp.d" />
    <java classname="${main.class}" fork="true">
      <classpath refid="project.class.path" />         
      <redirector
	  input="testdata/test04.input.txt"
	  output="temp.d/test04.output.txt" />
    </java>
    <condition property="test04passed" value="true">
      <filesmatch file1="testdata/test04.expected.txt"
		  file2="temp.d/test04.output.txt" />
    </condition>
    <echo if:set="test04passed">test04 from testdata passed</echo>
    <echo unless:set="test04passed">test04 from testdata failed</echo>
    
  </target>

    <target name="diff-test-05" depends="compile" description="run tests using CLI, diffing actual and expected output ">

    <delete dir="temp.d" quiet="true" />
    <mkdir dir="temp.d" />
    <java classname="${main.class}" fork="true">
      <classpath refid="project.class.path" />         
      <redirector
	  input="testdata/test05.input.txt"
	  output="temp.d/test05.output.txt" />
    </java>
    <condition property="test05passed" value="true">
      <filesmatch file1="testdata/test05.expected.txt"
		  file2="temp.d/test05.output.txt" />
    </condition>
    <echo if:set="test05passed">test05 from testdata passed</echo>
    <echo unless:set="test05passed">test05 from testdata failed</echo>
    
  </target>

  
</project>
